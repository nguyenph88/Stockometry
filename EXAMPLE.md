# Stock Analysis Bot - JSON Output Guide (v2)

This document explains the structure and meaning of the daily JSON report generated by the Stock Analysis Bot. This enhanced version includes an executive summary and source article links for full transparency and auditability.

---

## Top-Level Structure

Each JSON file represents a single day's analysis and contains the following top-level fields:

| Field               | Type   | Description                                                                                             | Example Value                  |
| ------------------- | ------ | ------------------------------------------------------------------------------------------------------- | ------------------------------ |
| `report_id`         | Integer| The unique ID of the report from the database.                                                          | `42`                           |
| `report_date`       | String | The date (UTC) for which the analysis was performed, in `YYYY-MM-DD` format.                              | `"2025-08-21"`                 |
| `generated_at_utc`  | String | The precise timestamp (UTC) when the report was generated, in ISO 8601 format.                            | `"2025-08-21T02:30:00.123456"`  |
| `executive_summary` | String | **New!** A human-readable summary of the day's key findings and signals.                                  | `"A consistent bullish trend was observed..."` |
| `signals`           | Object | The core of the report, containing all the analytical signals. See detailed breakdown below.              | `{...}`                        |

---

## The `signals` Object

This object contains arrays for `historical`, `impact`, and `confidence` signals. Each signal object within these arrays now includes a `source_articles` field.

### `source_articles` Array

This new array is present in every signal object and provides the direct links to the news articles that contributed to the signal.

* **`title`** (String): The headline of the source article.
* **`url`** (String): The direct URL to the source article.

**Example:**
```json
"source_articles": [
  {
    "title": "Microsoft Announces Groundbreaking AI Deal",
    "url": "[https://news-source.com/msft-ai-deal-123](https://news-source.com/msft-ai-deal-123)"
  }
]
```

---

## Signal Types Breakdown

### 1. `historical`
Identifies sectors with consistent sentiment trends over the last six days.

**Example:**
```json
"historical": [
  {
    "type": "HISTORICAL",
    "direction": "Bullish",
    "sector": "Technology",
    "source_articles": [
      {
        "title": "Apple Reports Strong iPhone Sales in Europe",
        "url": "[https://another-source.com/apple-sales-q3](https://another-source.com/apple-sales-q3)"
      }
    ]
  }
]
```

### 2. `impact`
Identifies sectors likely to be affected by high-impact news events from today.

**Example:**
```json
"impact": [
  {
    "type": "IMPACT",
    "sector": "Technology",
    "direction": "UP",
    "details": "High-impact news titled 'Microsoft Announces Groundbreaking AI Deal' (Sentiment: positive @ 0.98).",
    "source_articles": [
      {
        "title": "Microsoft Announces Groundbreaking AI Deal",
        "url": "[https://news-source.com/msft-ai-deal-123](https://news-source.com/msft-ai-deal-123)"
      }
    ]
  }
]
```

### 3. `confidence`
The most important signal, where historical trends and today's impact events align. The `predicted_stocks` object is also enhanced.

#### `predicted_stocks` Object (Enhanced)
* **`symbol`** (String): The stock ticker symbol.
* **`reason`** (String): The title of the news article driving the prediction.
* **`url`** (String): **New!** The direct URL to the source article for this specific stock prediction.
* **`score`** (Float): The sentiment score of the source article.

**Example:**
```json
"confidence": [
  {
    "type": "CONFIDENCE",
    "direction": "BULLISH",
    "sector": "Technology",
    "predicted_stocks": [
      {
        "symbol": "MSFT",
        "reason": "Microsoft Announces Groundbreaking AI Deal",
        "url": "[https://news-source.com/msft-ai-deal-123](https://news-source.com/msft-ai-deal-123)",
        "score": 0.98
      }
    ],
    "source_articles": [
      {
        "title": "Apple Reports Strong iPhone Sales in Europe",
        "url": "[https://another-source.com/apple-sales-q3](https://another-source.com/apple-sales-q3)"
      },
      {
        "title": "Microsoft Announces Groundbreaking AI Deal",
        "url": "[https://news-source.com/msft-ai-deal-123](https://news-source.com/msft-ai-deal-123)"
      }
    ]
  }
]
```
**Interpretation**: The bot has high confidence in a bullish move for Technology. The `source_articles` array shows you all the news that contributed to this signal (both historical and from today). The `predicted_stocks` array pinpoints MSFT as a likely mover and gives you the exact article (`url`) that triggered that specific prediction.
